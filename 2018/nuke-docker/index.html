<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta name="apple-mobile-web-app-capable" content="yes"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title> remove docker from ubuntu | My Blog </title> <meta name="description" content=" How to uninstall docker on ubuntu. "> <meta name="keywords" content="docker, ubuntu, debian, apt-get"> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <!-- Social: Twitter --> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:site" content="MohamedElashri"> <meta name="twitter:title" content=" remove docker from ubuntu | My Blog "> <meta name="twitter:description" content=" How to uninstall docker on ubuntu. "> <meta name="twitter:image:src" content="https://blog.melashri.net"> <!-- Canonical link tag --> <link rel="canonical" href="https://blog.melashri.net/2018/nuke-docker/"> <link rel="alternate" type="application/rss+xml" title="My Blog" href="https://blog.melashri.net/feed.xml"> <!-- rel prev and next --> <link rel="stylesheet" href="https://blog.melashri.net/assets/css/main.css"> <link rel="stylesheet" href="/assets/css/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous"> </head> <body> <main class="wrapper"> <header class="site-header"> <nav class="nav"> <div class="container"> <h1 class="logo"><a href="https://blog.melashri.net/">My Blog<span></span></a> </h1> <ul class="navbar"> <li><a href="https://blog.melashri.net/about">About</a></li> <li><a href="https://blog.melashri.net/feed.xml" target="_blank">RSS</a></li> </ul> </div> </nav> </header> <article class="post container" itemscope itemtype="http://schema.org/BlogPosting"> <header class="post-header"> <p class="post-meta"><time datetime="2018-06-23T00:00:00+00:00" itemprop="datePublished">Jun 23, 2018</time></p> <h1 class="post-title" itemprop="name headline"> remove docker from ubuntu </h1> </header> <div class="post-content" itemprop="articleBody"> <hr /> <p>The docker command provides several options for managing Docker containers and images. One of these options is the <code class="highlighter-rouge">system prune</code> command, which can be used to remove unused data from the Docker system. This command can be used to “nuke” everything Docker, by removing all unused containers, images, networks, and volumes. Later you can safely remove docker from the system.</p> <p>To nuke everything Docker, you can use the following script:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Stop and remove all running containers</span>
docker stop <span class="si">$(</span>docker ps <span class="nt">-aq</span><span class="si">)</span>
docker <span class="nb">rm</span> <span class="si">$(</span>docker ps <span class="nt">-aq</span><span class="si">)</span>

<span class="c"># Remove all unused images</span>
docker rmi <span class="si">$(</span>docker images <span class="nt">-q</span><span class="si">)</span>

<span class="c"># Remove all unused networks</span>
docker network prune <span class="nt">-f</span>

<span class="c"># Remove all unused volumes</span>
docker volume prune <span class="nt">-f</span>
</code></pre></div></div> <p>This code uses stops and removes all running containers, removes all unused images, removes all unused networks, and removes all unused volumes. The <code class="highlighter-rouge">-f</code> option is used with the <code class="highlighter-rouge">network prune</code> and <code class="highlighter-rouge">volume prune</code> commands to force the removal of the unused data.</p> <p>Note that using the <code class="highlighter-rouge">system prune</code> command or the script above will remove all unused data from the Docker system. This can free up a significant amount of disk space, but it can also remove data that you may want to keep. Therefore, it is recommended to use this command with caution and only when you are sure that you want to remove all unused data from the Docker system.</p> <p>Now to remove docker from ubuntu, you can use the following commands:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get purge <span class="nt">-y</span> docker-engine docker docker.io docker-ce<span class="p">;</span>
<span class="nb">sudo </span>apt-get autoremove <span class="nt">-y</span> <span class="nt">--purge</span> docker-engine docker docker.io docker-ce<span class="p">;</span>
<span class="nb">sudo rm</span> <span class="nt">-rf</span> /var/lib/docker <span class="nb">sudo rm</span> /etc/apparmor.d/docker <span class="nb">sudo </span>groupdel docker <span class="nb">sudo rm</span> <span class="nt">-rf</span> /var/run/docker.sock<span class="p">;</span>
</code></pre></div></div> <p>All of these can be written in a simple nice bash script for automation.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="c">## Stop and remove all containers</span>
<span class="nb">echo</span> <span class="s2">"Removing containers :"</span>
<span class="k">if</span> <span class="o">[</span> <span class="nt">-n</span> <span class="s2">"</span><span class="si">$(</span>docker container <span class="nb">ls</span> <span class="nt">-aq</span><span class="si">)</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then

  </span>docker container stop <span class="si">$(</span>docker container <span class="nb">ls</span> <span class="nt">-aq</span><span class="si">)</span><span class="p">;</span>

  docker container <span class="nb">rm</span> <span class="si">$(</span>docker container <span class="nb">ls</span> <span class="nt">-aq</span><span class="si">)</span><span class="p">;</span>
<span class="k">fi</span><span class="p">;</span>

<span class="c">## Remove all images</span>
<span class="nb">echo</span> <span class="s2">"Removing images :"</span>
<span class="k">if</span> <span class="o">[</span> <span class="nt">-n</span> <span class="s2">"</span><span class="si">$(</span>docker images <span class="nt">-aq</span><span class="si">)</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then

  </span>docker rmi <span class="nt">-f</span> <span class="si">$(</span>docker images <span class="nt">-aq</span><span class="si">)</span><span class="p">;</span>
<span class="k">fi</span><span class="p">;</span>

<span class="c">## Remove all volumes</span>
<span class="nb">echo</span> <span class="s2">"Removing volumes :"</span>
<span class="k">if</span> <span class="o">[</span> <span class="nt">-n</span> <span class="s2">"</span><span class="si">$(</span>docker volume <span class="nb">ls</span> <span class="nt">-q</span><span class="si">)</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then

  </span>docker volume <span class="nb">rm</span> <span class="si">$(</span>docker volume <span class="nb">ls</span> <span class="nt">-q</span><span class="si">)</span><span class="p">;</span>
<span class="k">fi</span><span class="p">;</span>

<span class="c">## Remove all networks</span>
<span class="nb">echo</span> <span class="s2">"Removing networks :"</span>
<span class="c"># Skip default networks : bridge, host, none</span>

<span class="k">if</span> <span class="o">[</span> <span class="nt">-n</span> <span class="s2">"</span><span class="si">$(</span>docker network <span class="nb">ls</span> | <span class="nb">awk</span> <span class="s1">'{print $1" "$2}'</span> | <span class="nb">grep</span> <span class="nt">-v</span> <span class="s1">'ID\|bridge\|host\|none'</span> | <span class="nb">awk</span> <span class="s1">'{print $1}'</span><span class="si">)</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then

  </span>docker network <span class="nb">rm</span> <span class="si">$(</span>docker network <span class="nb">ls</span> | <span class="nb">awk</span> <span class="s1">'{print $1" "$2}'</span> | <span class="nb">grep</span> <span class="nt">-v</span> <span class="s1">'ID\|bridge\|host\|none'</span> | <span class="nb">awk</span> <span class="s1">'{print $1}'</span><span class="si">)</span><span class="p">;</span>
<span class="k">fi</span><span class="p">;</span>


<span class="c">## Remove docker engine and clean</span>
<span class="nb">echo</span> <span class="s2">"Uninstall and clean docker :"</span>

<span class="k">if</span> <span class="o">[</span> <span class="nt">-n</span> <span class="s2">"</span><span class="si">$(</span>dpkg <span class="nt">-l</span> | <span class="nb">grep</span> <span class="nt">-i</span> docker <span class="si">)</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then

  </span><span class="nb">sudo </span>apt-get purge <span class="nt">-y</span> docker-engine docker docker.io docker-ce<span class="p">;</span>
  <span class="nb">sudo </span>apt-get autoremove <span class="nt">-y</span> <span class="nt">--purge</span> docker-engine docker docker.io docker-ce<span class="p">;</span>
  <span class="nb">sudo rm</span> <span class="nt">-rf</span> /var/lib/docker <span class="nb">sudo rm</span> /etc/apparmor.d/docker <span class="nb">sudo </span>groupdel docker <span class="nb">sudo rm</span> <span class="nt">-rf</span> /var/run/docker.sock<span class="p">;</span>
<span class="k">fi</span><span class="p">;</span>

<span class="nb">echo</span> <span class="s2">"Done :"</span>
</code></pre></div></div> </div> </article> <aside id="comments" class="isso"> <div class="container"> <h3><i class="icon icon-comments-o"></i> Comments</h3> <div id="isso_thread"></div> <script data-isso="https://comments.melashri.eu.org/" data-isso-avatar="true" data-isso-vote="true" data-isso-vote-levels="-5,5" src="https://comments.melashri.eu.org/js/embed.min.js"></script> <section id="isso-thread"></section> <noscript> Please enable JavaScript to view the <a href="https://blog.melashri.net" rel="nofollow">comments powered by ISSO.</a> </noscript> </div> </aside> <footer class="site-footer"> <div class="container"> <small class="block">&copy; 2023 Mohamed Elashri &middot; &lt;/&gt; Powered by <a href="https://jekyllrb.com/">Jekyll</a> and <a href="https://github.com/VerifiedGruber/thinkspace">Thinkspace theme</a></small> </div> </footer> </main> </body> </html>
