<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta name="apple-mobile-web-app-capable" content="yes"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title> Convert ROOT to CSV | My Blog </title> <meta name="description" content=" How to convert ROOT files to CSV files "> <meta name="keywords" content="ROOT, data, LHC, CERN, csv"> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <!-- Social: Twitter --> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:site" content="MohamedElashri"> <meta name="twitter:title" content=" Convert ROOT to CSV | My Blog "> <meta name="twitter:description" content=" How to convert ROOT files to CSV files "> <meta name="twitter:image:src" content="https://blog.melashri.net"> <!-- Canonical link tag --> <link rel="canonical" href="https://blog.melashri.net/2020/convert-root-to-csv/"> <link rel="alternate" type="application/rss+xml" title="My Blog" href="https://blog.melashri.net/feed.xml"> <!-- rel prev and next --> <link rel="stylesheet" href="https://blog.melashri.net/assets/css/main.css"> <link rel="stylesheet" href="/assets/css/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous"> </head> <body> <main class="wrapper"> <header class="site-header"> <nav class="nav"> <div class="container"> <h1 class="logo"><a href="https://blog.melashri.net/">My Blog<span></span></a> </h1> <ul class="navbar"> <li><a href="https://blog.melashri.net/about">About</a></li> <li><a href="https://blog.melashri.net/feed.xml" target="_blank">RSS</a></li> </ul> </div> </nav> </header> <article class="post container" itemscope itemtype="http://schema.org/BlogPosting"> <header class="post-header"> <p class="post-meta"><time datetime="2020-01-25T00:00:00+00:00" itemprop="datePublished">Jan 25, 2020</time></p> <h1 class="post-title" itemprop="name headline">Convert ROOT to CSV</h1> </header> <div class="post-content" itemprop="articleBody"> <hr /> <p>Recently Iâ€™m working with a lot of <code class="highlighter-rouge">.root</code> files which is the standard format used in high energy physics for data storage and analysis. It is still hard to use specialized machine learning tools to read and analyze this data. So I searched for a solution and came into this amazing package <a href="https://www.rootpy.org/">rootpy</a>.</p> <p>The rootpy package is a Python interface to the ROOT data analysis tool. It provides a convenient way to work with ROOT files and trees in Python.</p> <p>To convert a ROOT file to a CSV file using rootpy, you can use the <code class="highlighter-rouge">root2array()</code> function. This function takes the path to the ROOT file and the name of the tree as arguments, and returns the data from the tree as a NumPy array. You can then use the NumPy <code class="highlighter-rouge">savetxt()</code> function to save the array to a CSV file.</p> <p>Here is an example of how to convert a ROOT file to a CSV file using rootpy:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">rootpy</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>

<span class="c1"># Load the data from the ROOT file into a NumPy array
</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">rootpy</span><span class="p">.</span><span class="n">root2array</span><span class="p">(</span><span class="s">"path/to/file.root"</span><span class="p">,</span> <span class="s">"tree_name"</span><span class="p">)</span>

<span class="c1"># Save the array to a CSV file
</span>
<span class="n">np</span><span class="p">.</span><span class="n">savetxt</span><span class="p">(</span><span class="s">"output.csv"</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">","</span><span class="p">)</span>
</code></pre></div></div> <p>In this example, the <code class="highlighter-rouge">root2array()</code> function loads the data from the specified tree in the ROOT file and returns it as a NumPy array. The savetxt() function then saves the array to a CSV file with the specified delimiter (in this case, a comma).</p> <p>Note that the <code class="highlighter-rouge">root2array()</code> function only converts the data from the tree to a NumPy array. If you want to include the branch and leaf names in the CSV file, you will need to use a different approach.</p> <p>Also we can use the following code:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">rootpy</span>
<span class="kn">from</span> <span class="nn">rootpy</span> <span class="kn">import</span> <span class="n">root_open</span>
<span class="n">f</span><span class="o">=</span><span class="n">root_open</span><span class="p">(</span><span class="s">'File.root'</span><span class="p">)</span>
<span class="n">t</span><span class="o">=</span><span class="n">f</span><span class="p">.</span><span class="n">Get</span><span class="p">(</span><span class="s">'FlatTree'</span><span class="p">)</span>
<span class="n">t</span><span class="p">.</span><span class="n">csv</span><span class="p">()</span>
</code></pre></div></div> <p>This code uses the rootpy package to open a ROOT file named File.root and extract the data from a tree named FlatTree. The <code class="highlighter-rouge">root_open()</code> function is used to open the ROOT file, and the <code class="highlighter-rouge">Get()</code> method is used to access the tree.</p> <p>Once the tree is accessed, the <code class="highlighter-rouge">csv()</code> method is called to export the data from the tree to a CSV file. This method writes the data to a CSV file with the same name as the tree and saves it in the same directory as the ROOT file.</p> <p>For example, if the ROOT file is located at <code class="highlighter-rouge">/path/to/File.root</code> and the tree is named FlatTree, the CSV file will be saved at <code class="highlighter-rouge">/path/to/FlatTree.csv</code>.</p> <p>The <code class="highlighter-rouge">csv()</code> method has several optional arguments that can be used to customize the output. For example, you can specify the delimiter to use in the CSV file, the precision of the floating point numbers, and whether to include the branch and leaf names in the output.</p> </div> </article> <aside id="comments" class="isso"> <div class="container"> <h3><i class="icon icon-comments-o"></i> Comments</h3> <div id="isso_thread"></div> <script data-isso="https://comments.melashri.eu.org/" data-isso-avatar="true" data-isso-vote="true" data-isso-vote-levels="-5,5" src="https://comments.melashri.eu.org/js/embed.min.js"></script> <section id="isso-thread"></section> <noscript> Please enable JavaScript to view the <a href="https://blog.melashri.net" rel="nofollow">comments powered by ISSO.</a> </noscript> </div> </aside> <footer class="site-footer"> <div class="container"> <small class="block">&copy; 2023 Mohamed Elashri &middot; &lt;/&gt; Powered by <a href="https://jekyllrb.com/">Jekyll</a> and <a href="https://github.com/VerifiedGruber/thinkspace">Thinkspace theme</a></small> </div> </footer> </main> </body> </html>
