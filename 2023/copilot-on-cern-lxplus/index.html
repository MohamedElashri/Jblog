<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta name="apple-mobile-web-app-capable" content="yes"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title> How to install Copilot on lxplus | My Blog </title> <meta name="description" content=" A collection of notes about physics, programming and personal thoughts. "> <meta name="keywords" content="Linux, Server, CERN, lxplus"> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <!-- Social: Twitter --> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:site" content="MohamedElashri"> <meta name="twitter:title" content=" How to install Copilot on lxplus | My Blog "> <meta name="twitter:description" content=" A collection of notes about physics, programming and personal thoughts. "> <meta name="twitter:image:src" content="https://blog.melashri.net"> <!-- Canonical link tag --> <link rel="canonical" href="https://blog.melashri.net/2023/copilot-on-cern-lxplus/"> <link rel="alternate" type="application/rss+xml" title="My Blog" href="https://blog.melashri.net/feed.xml"> <!-- rel prev and next --> <link rel="stylesheet" href="https://blog.melashri.net/assets/css/main.css"> <link rel="stylesheet" href="/assets/css/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous"> </head> <body> <main class="wrapper"> <header class="site-header"> <nav class="nav"> <div class="container"> <h1 class="logo"><a href="https://blog.melashri.net/">My Blog<span></span></a> </h1> <ul class="navbar"> <li><a href="https://blog.melashri.net/about">About</a></li> <li><a href="https://blog.melashri.net/feed.xml" target="_blank">RSS</a></li> </ul> </div> </nav> </header> <article class="post container" itemscope itemtype="http://schema.org/BlogPosting"> <header class="post-header"> <p class="post-meta"><time datetime="2023-02-01T00:00:00+00:00" itemprop="datePublished">Feb 1, 2023</time></p> <h1 class="post-title" itemprop="name headline">How to install Copilot on lxplus</h1> </header> <div class="post-content" itemprop="articleBody"> <p>I have been relying on connecting to lxplus on vsocde. But recently I got a lot of problems with the connection and probably some problem with vsocde server causing memory leaks which sometime resluted in automated email from CERN IT that I’m using too much memory. I was not happy with this and then I had to resort to the old fashion connection via terminal. Then I needed my favourite tool to help me when I’m writing code, of course I’m talking about github copilot. I grow dependence on that tool and how easy it makes editing and filling those historgram trees and vectors. Copilot is available for limited number of editors, it is currently available only for VSCode, JetBrains IDEs and vim/Nvim. My favourite terminal editor is vim anyway. I even had this in my vimrc file:</p> <div class="language-vim highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> EDITOR<span class="p">=</span><span class="k">vim</span> # Viva <span class="k">vim</span><span class="p">,</span> Death <span class="k">to</span> Emacs
</code></pre></div></div> <p>Sorry for Emacs folks but even <code class="highlighter-rouge">nano</code> is still better. The problem is to install copilot on vim/Nvim you need <code class="highlighter-rouge">vim 9.0.0185</code> or newer. lxplus default vim version is very old and stucked for <code class="highlighter-rouge">vim ~ 7</code> for some reason. I had to build vim from source and install it as non-root user. Here I will explain how to do this:</p> <p>The first part is downloading the vim source code. you can download the latest source from <a href="https://www.vim.org/download.php">vim download page</a>. First lets create a directory in our home to put the source and install</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> <span class="nv">$HOME</span>/private 
<span class="nb">mkdir </span>myvim <span class="o">&amp;&amp;</span> <span class="nb">cd </span>myvim
</code></pre></div></div> <p>Next lets download the vim source code and extract the tar archive</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget https://ftp.nluug.nl/pub/vim/unix/vim-9.0.tar.bz2 <span class="o">&amp;&amp;</span> <span class="nb">tar </span>xvf vim-9.0.tar.gz
</code></pre></div></div> <p>Now lets change into the Vim source directory</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>vim-9.0
</code></pre></div></div> <p>We need to configure the build process, making sure to specify a prefix directory where you have write permissions (e.g. <code class="highlighter-rouge">~/local</code>):</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ./configure <span class="nt">--prefix</span><span class="o">=</span><span class="nv">$HOME</span>/local
</code></pre></div></div> <p>The next step is to compile and install Vim:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make <span class="o">&amp;&amp;</span> make <span class="nb">install</span>
</code></pre></div></div> <p>To overwrite the pre-existing version of Vim with the one you installed in your local directory, you’ll need to ensure that the executable in your local directory is found first in your PATH. You can do this by modifying your shell profile (e.g. <code class="highlighter-rouge">~/.bashrc</code>, <code class="highlighter-rouge">~/.bash_profile</code>, or <code class="highlighter-rouge">~/.zshrc</code>) to add the following line at the end:</p> <div class="language-vim highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> PATH<span class="p">=</span>$HOME<span class="sr">/local/</span><span class="nb">bin</span><span class="p">:</span>$PATH
</code></pre></div></div> <p>This will make the vim executable in <code class="highlighter-rouge">~/local/bin</code> the first one that is found when you run vim in your terminal, effectively overwriting the pre-existing version. Remember to restart your terminal or source the shell profile after making these changes for the changes to take effect: source ~/.bashrc (or equivalent for your shell).</p> <p>Now we need to install the copilot plugin for vim. We first need to determine the location of Vim’s runtime directory, which is typically <code class="highlighter-rouge">~/.vim </code>or <code class="highlighter-rouge">~/.local/share/vim</code>. We can determine the location of the runtime directory by running the following command in Vim:</p> <div class="language-vim highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">:</span>echo &amp;<span class="nb">runtimepath</span>
</code></pre></div></div> <p>This will display a list of directories separated by commas, where Vim looks for its runtime files. The first directory in the list is the primary runtime directory.</p> <p>Next, you’ll need to download the extension you want to install and place it in the appropriate subdirectory of the runtime directory. The subdirectory depends on the type of extension:</p> <ul> <li><code class="highlighter-rouge">Plugins</code> should be placed in the <code class="highlighter-rouge">~/.vim/pack/plugins/start</code> directory.</li> <li><code class="highlighter-rouge">Colorschemes</code> should be placed in the <code class="highlighter-rouge">~/.vim/colors</code> directory.</li> <li><code class="highlighter-rouge">Syntax files</code> should be placed in the <code class="highlighter-rouge">~/.vim/syntax</code> directory.</li> </ul> <p>To install copilot we can use the following command:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/github/copilot.vim.git <span class="se">\</span>
  ~/.vim/pack/github/start/copilot.vim
</code></pre></div></div> <p>Now we can open vim and start copilot setup to link to our github account. To start copilot setup we can use the following command:</p> <div class="language-vim highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">:</span>Copilot setup
</code></pre></div></div> <p>This will give you token and link to open on your devcie (open link in browser) and then paste the token into the page that appears in browser and then wait a couple of seconds for the setup to complete. If successful, you can start using copilot by typing <code class="highlighter-rouge">:Copilot</code> in vim.</p> <p>I hope this helps you to install copilot on lxplus. If you have any questions or comments please leave them below. Thanks for reading.</p> </div> </article> <aside id="comments" class="isso"> <div class="container"> <h3><i class="icon icon-comments-o"></i> Comments</h3> <div id="isso_thread"></div> <script data-isso="https://comments.melashri.eu.org/" data-isso-avatar="true" data-isso-vote="true" data-isso-vote-levels="-5,5" src="https://comments.melashri.eu.org/js/embed.min.js"></script> <section id="isso-thread"></section> <noscript> Please enable JavaScript to view the <a href="https://blog.melashri.net" rel="nofollow">comments powered by ISSO.</a> </noscript> </div> </aside> <footer class="site-footer"> <div class="container"> <small class="block">&copy; 2023 Mohamed Elashri &middot; &lt;/&gt; Powered by <a href="https://jekyllrb.com/">Jekyll</a> and <a href="https://github.com/VerifiedGruber/thinkspace">Thinkspace theme</a></small> </div> </footer> </main> </body> </html>
